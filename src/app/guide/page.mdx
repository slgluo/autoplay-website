import Score from '@/components/score'

# 使用说明

## 一、使用步骤

1. 下载 `AutoPlay.zip` 压缩包后解压，进入解压文件夹，双击 `PlayHelper.exe`
2. 软件打开之后，在 **自动弹奏** 页，单击选择某一首曲子，此时底部显示选择的歌曲名称
3. 勾选 **同步到游戏** 选项
4. 打开游戏弹琴界面（要事先打开，否则开始弹奏后界面可能乱跳或者乱输入）
5. 点击软件开始播放按钮，`2秒`钟后开始弹奏，即你有`2秒`钟的时间切换到游戏弹琴界面
6. 在弹奏过程中，按 `F1` 停止弹奏
7. 倍速调节：可以在弹奏前设置，也可在游戏中弹奏时通过方向键`↑`和`↓`进行调节

::: tip 同步到游戏

- 开启状态：软件按键模拟输入开启，在该状态下才能进行自动弹奏
- 关闭状态：软件按键模拟输入关闭，在该状态下不进行自动弹奏，且在底部歌曲名下方显示按键信息，一般用于检测 mid 是否有效
:::

## 二、Mid 文件导入弹奏

1. 在 **自动弹奏** 页，点击 **导入 mid** 按钮，此时会弹出文件选择框
2. 选择一个 mid 文件，如果导入成功，底部会显示 mid 文件名
3. 同 **使用步骤** 的 **3,4,5** 步骤，打开弹琴界面 -> 勾选同步到游戏 -> 点击开始播放按钮 -> 切换至弹琴界面

::: warning 注意
软件会忽略 mid 中不支持的音（支持 21 个音，无变化，即无升降号）。因此，并不是在网上随便下载一个 mid 文件导入弹奏就会有原 mid 的效果
:::

## 三、曲谱上传分享

该软件支持上传 mid/mml 文件进行分享

- 在 **曲谱分享** 页中，点击 **选择 mid 或 mml 文件** 按钮，选择要上传的 mid 或 mml（支持`.mml`和`.txt`两种格式） 文件，并填写 **上传者**（如果不填写，在列表中显示佚名），点击 **上传** 按钮
- 上传成功后，曲谱分别在 **自动弹奏** 的 **Mid 曲谱列表** 和 **MML 曲谱列表** 中进行展示（需要刷新一下），对使用该软件的用户可见
- 为保证 mid/mml 曲谱 质量，软件对上传的 mid/mml 文件进行音域检测（21 个音且无升降号），如果存在不合法的音，上传会失败

## 四、Mid 曲谱制作

制作 Mid 曲谱的软件有很多，比如 `MuseScore`、`Sibelius`（西贝柳斯）、`FLStudio`（俗称水果）、`Cubase`等等，所列软件中，
`MuseScore`为免费软件，因此以`MuseScore`为例进行说明。`MuseScore`可以百度搜索下载，这里不提供下载

### 1. 曲谱创建

安装`MuseScore`之后打开，曲谱创建过程如下：

#### （1）新建曲谱，填写曲谱信息

曲谱信息按照需要进行填写，也可以不填

| 新建                           | 曲谱信息填写                                  |
| ------------------------------ | --------------------------------------------- |
| ![新建](https://autoplay.chimomo.cn/oss/autoplay/images/new_score.png) | ![填写曲谱信息](https://autoplay.chimomo.cn/oss/autoplay/images/score_info_input.png) |

#### （2）选择曲谱模板

这里选择**大谱表**，它包括高音谱和低音谱，方便我们写旋律和和弦。如果你只写单音，可以选择**高音谱号**

![模板选择](https://autoplay.chimomo.cn/oss/autoplay/images/template_select.png)

#### （3）选择谱号类型

这里是重点，一定要选择**C 调谱**（无升降号），因为游戏只支持 21 个无升降的三个八度范围的正常音，而且软件也会过滤非法音，为了软件能正常解析，这里一定要选择**C 调谱**

![谱号选择](https://autoplay.chimomo.cn/oss/autoplay/images/key_signature.png)

#### （4）拍号和速度选择

如下图红框圈选所示，根据原曲的拍号和速度进行填写，一般在曲谱的左上角有标明。如果没有标，按照自己的理解进行填写，这里就不进行乐理的普及。

![拍号和速度选择](https://autoplay.chimomo.cn/oss/autoplay/images/signature_tempo.png)

填写完成后，点击**完成**按钮

### 2. 曲谱编写

#### （1）基本操作认识

在编写之前，先了解一下软件的基本操作，如下图所示：

![音符说明](https://autoplay.chimomo.cn/oss/autoplay/images/note_action.png)

1. 音符输入模式：点击 **`N`** 符号按钮，开启音符输入模式，变蓝即为开启状态，关闭后（再点一下 N），该状态下无法输入音符
2. 选择音符（选择后变蓝），在五线谱的**间**或**线**点一下，中途需要切换不同的分音符时，在音符选择栏点击一下你需要切换的分音符，再进行音符的录入
3. 休止符输入：在音符输入模式下，先选择分音符，在选择休止符，录入。例如输入一个**八分休止符**，先开启输入模式，选择八分音符，选择休止符，录入。
4. 你可以边写边播放试听，听一下效果，此时可以点击`MuseScore`的播放按钮

::: warning 注意
演奏助手支持 C 调谱的音域为

- 最低音：低音谱第二间
- 最高音：高音谱上加二间
:::

如下图所示：
![音域](https://autoplay.chimomo.cn/oss/autoplay/images/note_area.png)

#### （2）《热爱 105° 的你》节选谱例

下面是《热爱 105° 的你》节选谱例，以吉他谱作为参考（抄），你也可以用简谱或五线谱做参考
|吉他谱|五线谱|
|-|-|
|![热爱105°的你-吉他谱](https://autoplay.chimomo.cn/oss/autoplay/images/re_ai_105_du_de_ni_jitapu.png)|![热爱105°的你-五线谱](https://autoplay.chimomo.cn/oss/autoplay/images/re_ai_105_du_de_ni_wuxianpu.png)|

::: tip 解析

1. 吉他谱中底部的数字就是旋律，对应五线谱的高音谱
2. 五线谱中低音谱的音符是和弦音，如果看不懂请忽略（说明你要补课），如果您是专业人士看得懂也请忽略，别喷，我瞎编的（按照吉他谱标的和弦，取和弦的构成音瞎编的）
3. 五线谱中用了比吉他谱标明的旋律高八度的音，是因为加了和弦，和弦音如果和旋律太靠近听起来会比较浑浊，且可能重叠，这个需要根据原曲旋律的音域范围进行综合考虑

PS：如果有机会，我可以出一个简单的和弦编配教程教（误）会（导）你们(#^.^#)
:::

### 3. 文件导出

编写完成后，我们需要导出 Mid 文件

- 文件 -> 导出
- 选择导出文件为 mid 后缀 -> 保存

文件导出后，可以按照 [二、Mid 文件导入弹奏](./README.md#二、mid-文件导入弹奏) 步骤进行导入自动弹奏，或按照 [三、Mid 曲谱分享](./README.md#三、mid-上传分享) 进行上传分享

如下图所示：
|导出|选择 mid 后缀|
|-|-|
|![导出](https://autoplay.chimomo.cn/oss/autoplay/images/export.png)|![选择mid后缀](https://autoplay.chimomo.cn/oss/autoplay/images/export_mid.png)|

## 五、MML 制作

### 1. MML 文件格式

软件支持`.mml`和`.txt`两种格式的文件

### 2. MML 语法说明

#### （1）符号集

| 符号 | 说明                                                                                                                 | 备注                               |
| ---- | -------------------------------------------------------------------------------------------------------------------- | ---------------------------------- |
| `t`  | tempo，表示速度，这里表达和 bpm（beats per minute）是同一个意思                                                      | 默认 120                           |
| `v`  | velocity，表示音量                                                                                                   | 无效符号（可以解析，但游戏不支持） |
| `o`  | octave，八度，后面的音符在哪一个八度上                                                                               | 默认 o4，小字 1 组                 |
| `l`  | length，音长，后面跟着的无音长音符默认的时值。如 l8ceg，表示 c8e8g8                                                  | 默认 l4，4 分音符                  |
| `c`  | 音名 C，唱名 1，后面跟着数字，表示时值                                                                               | 后面不跟数字，视当前的`l`值而定    |
| `d`  | 音名 D，唱名 2，后面跟着数字，表示时值                                                                               | 后面不跟数字，视当前的`l`值而定    |
| `e`  | 音名 E，唱名 3，后面跟着数字，表示时值                                                                               | 后面不跟数字，视当前的`l`值而定    |
| `f`  | 音名 F，唱名 4，后面跟着数字，表示时值                                                                               | 后面不跟数字，视当前的`l`值而定    |
| `g`  | 音名 G，唱名 5，后面跟着数字，表示时值                                                                               | 后面不跟数字，视当前的`l`值而定    |
| `a`  | 音名 A，唱名 6，后面跟着数字，表示时值                                                                               | 后面不跟数字，视当前的`l`值而定    |
| `b`  | 音名 B，唱名 7，后面跟着数字，表示时值                                                                               | 后面不跟数字，视当前的`l`值而定    |
| `r`  | 休止符，后面跟着数字，表示时值                                                                                       | 后面不跟数字，视当前的`l`值而定    |
| `<`  | 降低一个八度，表示在当前八度下（即`o`的值是多少），后面跟着的音符都降一个 8 度，可以连续使用，如`<<`表示降 2 个 8 度 |                                    |
| `>`  | 升高一个八度，表示在当前八度下（即`o`的值是多少），后面跟着的音符都升一个 8 度，可以连续使用，如`>>`表示升 2 个 8 度 |                                    |
| `.`  | 附点音符，延长前面音符的一半，附点音符前后一定是同一个音                                                             |                                    |
| `&`  | 连音符，延长前面的音符，连音符前后一定是同一个音，延长的时值根据后面的音而定                                         |                                    |
| `^`  | 连音符，同 &                                                                                                         |                                    |
| `[]` | 和弦，中括号里的音符会同时发声，音符时值必须一样，如`[c8e8g8]`                                                       |                                    |
| `/:` | 循环开始符号                                                                                                         |                                    |
| `:/` | 循环结束符号，后面可以跟一个数字，表示循环次数                                                                       | 后面不跟数字时，默认为 2           |
| `\|` | 最后一次循环的截止位置，必须在`/:`和`:/`中间，如`/:ce\|g:/3`，在第三遍循环时，到`e`结束，`g`不再发声                 |                                    |
| `+`  | 升号`#`，表示升一个半音，跟在音符后面，如`c+`，`c8+`                                                                 | 无效符号（可以解析，但游戏不支持） |
| `-`  | 降号`b`，表示降一个半音，跟在音符后面，如`c-`，`c8-`                                                                 | 无效符号（可以解析，但游戏不支持） |
| `,`  | 分轨，多个轨道组成的曲子，`t`的值必须一样                                                                            |                                    |
| `;`  | 分轨，多个轨道组成的曲子，`t`的值必须一样                                                                            |                                    |

#### （2）例子

```
ceg
```

在不指明`t`，`o`，`l`的情况下，它们默认为`t120`，`o4`，`l4`
<Score>
  Q:120
  L:1/4
  CEG
</Score>

```
t80l8ceg
```

<Score>
  Q:80
  L:1/8
  CEG
</Score>

```
t80o3ceg
```

<Score>
  Q:80
  V:1 clef=bass
  C,E,G,
</Score>

```
t80c4c4c4e4& e8
```

<Score>
  Q:80
  L:1/4
  CCC(E|E/2)
</Score>

```
t80c4c4>c4<e4& e8
```

<Score>
  Q:80
  L:1/4
  CCc(E|E/2)
</Score>

```
t80c4c4>c4<e4& e8d8r4e4f8g8
```

<Score>
  Q:1/4=80
  L:1/4
  CCc(E|E/2)zEF/2G/2|
</Score>

```
t80c4c4>c4<e4 e8.d16f4g4
```

<Score>
  Q:1/4=80
  L:1/4
  CCcE|E/2>D/2EFG|
</Score>

```
t80[ceg][dfa][egb][fa>c]
```

<Score>
  Q:1/4=80
  L:1/4
  [CEG][DFA][EGB][FAc]|
</Score>

```
t80/:cdef cdefg:/ cdef
```

<Score>
  Q:1/4=80
  L:1/4
  |:CDEF|CDEF:|CDEF|
</Score>

```
t80g4e8g8>c2< a4>c8<a8g2 g4c8d8e4d8c8,
t80o3c8g8e8g8c8g8e8g8 c8a8f8a8c8a8f8a8 c8g8e8g8c8g8e8g8
```

<Score>
  Q:1/4=80
  L:1/4
  V:1 clef=treble
  V:2 clef=bass
  [V: 1] GE/2G/2c2|Ac/2A/2G2|GC/2D/2ED/2C/2|
  [V: 2] C,/2G,/2E,/2G,/2 C,/2G,/2E,/2G,/2|C,/2A,/2F,/2A,/2 C,/2A,/2F,/2A,/2|C,/2G,/2E,/2G,/2 C,/2G,/2E,/2G,/2|
</Score>
